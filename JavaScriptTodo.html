<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div>
      <div class="grid col-4 offset-sm-4 mt-5">
        <form onsubmit="mySumbit(event)">
          <div class="mb-3">
            <label for="name" class="form-label">First Name</label>
            <input type="text" name="name" class="form-control" id="name" />
          </div>
          <div class="mb-3">
            <label for="name" class="form-label">Last Name</label>
            <input type="text" name="lname" class="form-control" id="lname" />
          </div>
          <div class="mb-3">
            <label for="number" class="form-label">Phone Number</label>
            <input
              type="number"
              name="number"
              class="form-control"
              id="number"
            />
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        <table class="table table-bordered mt-5">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th id="name" scope="col">Name</th>
              <th id="phoneNumber" scope="col">Phone Number</th>
              <th scope="col">Delete</th>
              <th scope="col">Edit</th>
            </tr>
          </thead>

          <tbody id="table-head">
            <!-- <tr>
              <th scope="row">1</th>
              <td>Mark</td>
              <td>Otto</td>
              <td>@mdo</td>
            </tr> -->
          </tbody>
            
        </table>
      </div>
    </div>

    <script>
      var isEdit = false;
      var objArry = [];
      var editObj;
      var elment = () => {
        let result = "";
        objArry.map((item) => {
          result += `<tr>
    <th scope="row">${item.sNo}</th>
    <td>${item.fName}-${item.lName}</td>
    <td>${item.phoneNo}</td>
    <td onclick='deletefun(${item.sNo})'>delete</td>
    <td onclick='edit(${item.sNo})'>edit</td>
    </tr> `;
        });
        return result;
      };

      function edit(sno) {
        isEdit = true;
        var newobjAerry = objArry.filter((item) => {
          return item.sNo === sno;
        });

        editObj = newobjAerry;
        console.log(newobjAerry, "newobjAerry");
        //   objArry=newobjAerry;
        document.getElementById("name").value = newobjAerry[0].fName;
        document.getElementById("lname").value = newobjAerry[0].lName;
        document.getElementById("number").value = newobjAerry[0].phoneNo;
      }
      function deletefun(sno) {
        var newobjArry = objArry.filter((item) => {
          return item.sNo !== sno;
        });
        objArry = newobjArry;
        objArry.forEach((item, ind) => {
          item.sNo = ind + 1;
        });
        document.getElementById("table-head").innerHTML = elment();
      }

      function mySumbit(event) {
        event.preventDefault();
        if (!isEdit) {
          objArry.push({
            sNo: objArry.length > 0 ? objArry.length + 1 : 1,
            fName: event.target.name.value,
            lName: event.target.lname.value,
            phoneNo: event.target.number.value,
          });
          event.target.reset();
        } else {
          objArry[editObj[0].sNo - 1].fName =
            document.getElementById("name").value;
          objArry[editObj[0].sNo - 1].lName =
            document.getElementById("lname").value;
          objArry[editObj[0].sNo - 1].phoneNo =
            document.getElementById("number").value;

          event.target.reset();
          isEdit = false;
        }
        if (objArry.length > 0) {
          document.getElementById("table-head").innerHTML = elment();
        }
      }
    </script>
     
  </body>
</html>
